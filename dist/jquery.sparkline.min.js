/***************************
File generated by shrinker.ch
DateTime: 2019-06-07, 00:07:04
File list:
* utils.js
* vcanvas-canvas.js
* vcanvas-base.js
* vcanvas-vml.js
* chart-box.js
* chart-bar.js
* chart-bullet.js
* chart-discrete.js
* base.js
* chart-line.js
* chart-pie.js
* chart-tristate.js
* defaults.js
* header.js
* footer.js
* interact.js
* rangemap.js
* simpledraw.js
*****************************/
createClass=function(){var a,b;a=function(){this.init.apply(this,arguments)};if(arguments.length>1){if(arguments[0]){a.prototype=$.extend(new arguments[0],arguments[arguments.length-1]);a._super=arguments[0].prototype}else a.prototype=arguments[arguments.length-1];if(arguments.length>2){b=Array.prototype.slice.call(arguments,1,-1);b.unshift(a.prototype);$.extend.apply($,b)}}else a.prototype=arguments[0];return a.prototype.cls=a};
$.SPFormatClass=SPFormat=createClass({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(a,b){this.format=a;this.fclass=b},render:function(a,b,c){var d=this,e,f,g,i,j;return this.format.replace(this.fre,function(h,k,l,n){f=k;g=n;if(e=d.precre.exec(f)){j=e[2];f=e[1]}else j=false;i=a[f];if(i===undefined)return"";if(g&&b&&b[g]){h=b[g];return h.get?b[g].get(i)||i:b[g][i]||i}if(isNumber(i))i=c.get("numberFormatter")?c.get("numberFormatter")(i):formatNumber(i,j,c.get("numberDigitGroupCount"),
c.get("numberDigitGroupSep"),c.get("numberDecimalMark"));return i})}});$.spformat=function(a,b){return new SPFormat(a,b)};clipval=function(a,b,c){if(a<b)return b;if(a>c)return c;return a};quartile=function(a,b){var c;if(b===2){c=Math.floor(a.length/2);return a.length%2?a[c]:(a[c-1]+a[c])/2}else{c=a.length%2?(a.length*b+b)/4:(a.length*b+2)/4;return c%1?(a[Math.floor(c)]+a[Math.floor(c)-1])/2:a[c-1]}};
normalizeValue=function(a){var b;switch(a){case "undefined":a=undefined;break;case "null":a=null;break;case "true":a=true;break;case "false":a=false;break;default:b=parseFloat(a);if(a==b)a=b}return a};normalizeValues=function(a){var b,c=[];for(b=a.length;b--;)c[b]=normalizeValue(a[b]);return c};remove=function(a,b){var c,d,e=[];c=0;for(d=a.length;c<d;c++)a[c]!==b&&e.push(a[c]);return e};isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)};
formatNumber=function(a,b,c,d,e){var f;a=(b===false?parseFloat(a).toString():a.toFixed(b)).split("");f=(f=$.inArray(".",a))<0?a.length:f;if(f<a.length)a[f]=e;for(b=f-c;b>0;b-=c)a.splice(b,0,d);return a.join("")};all=function(a,b,c){var d;for(d=b.length;d--;)if(!(c&&b[d]===null))if(b[d]!==a)return false;return true};sum=function(a){var b=0,c;for(c=a.length;c--;)b+=typeof a[c]==="number"?a[c]:0;return b};ensureArray=function(a){return $.isArray(a)?a:[a]};
addCSS=function(a){var b,c;if(document.createStyleSheet)try{document.createStyleSheet().cssText=a;return}catch(d){c=true}b=document.createElement("style");b.type="text/css";document.getElementsByTagName("head")[0].appendChild(b);if(c)document.styleSheets[document.styleSheets.length-1].cssText=a;else b[typeof document.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=a};
VCanvas_canvas=createClass(VCanvas_base,{init:function(a,b,c,d){VCanvas_canvas._super.init.call(this,a,b,c);this.canvas=document.createElement("canvas");if(c[0])c=c[0];$.data(c,"_jqs_vcanvas",this);$(this.canvas).css({display:"inline-block",width:a,height:b,verticalAlign:"top"});this._insert(this.canvas,c);this._calculatePixelDims(a,b,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;this.interact=d;this.shapes={};this.shapeseq=[];this.currentTargetShapeId=undefined;
$(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(a,b,c){var d=this.canvas.getContext("2d");if(a!==undefined)d.strokeStyle=a;d.lineWidth=c===undefined?1:c;if(b!==undefined)d.fillStyle=b;return d},reset:function(){this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight);this.shapes={};this.shapeseq=[];this.currentTargetShapeId=undefined},_drawShape:function(a,b,c,d,e){e=this._getContext(c,d,e);var f,g;e.beginPath();e.moveTo(b[0][0]+0.5,b[0][1]+0.5);
f=1;for(g=b.length;f<g;f++)e.lineTo(b[f][0]+0.5,b[f][1]+0.5);c!==undefined&&e.stroke();d!==undefined&&e.fill();if(this.targetX!==undefined&&this.targetY!==undefined&&e.isPointInPath(this.targetX,this.targetY))this.currentTargetShapeId=a},_drawCircle:function(a,b,c,d,e,f,g){g=this._getContext(e,f,g);g.beginPath();g.arc(b,c,d,0,2*Math.PI,false);if(this.targetX!==undefined&&this.targetY!==undefined&&g.isPointInPath(this.targetX,this.targetY))this.currentTargetShapeId=a;e!==undefined&&g.stroke();f!==
undefined&&g.fill()},_drawPieSlice:function(a,b,c,d,e,f,g,i){var j=this._getContext(g,i);j.beginPath();j.moveTo(b,c);j.arc(b,c,d,e,f,false);j.lineTo(b,c);j.closePath();g!==undefined&&j.stroke();i&&j.fill();if(this.targetX!==undefined&&this.targetY!==undefined&&j.isPointInPath(this.targetX,this.targetY))this.currentTargetShapeId=a},_drawRect:function(a,b,c,d,e,f,g){return this._drawShape(a,[[b,c],[b+d,c],[b+d,c+e],[b,c+e],[b,c]],f,g)},appendShape:function(a){this.shapes[a.id]=a;this.shapeseq.push(a.id);
return this.lastShapeId=a.id},replaceWithShape:function(a,b){var c=this.shapeseq,d;this.shapes[b.id]=b;for(d=c.length;d--;)if(c[d]==a)c[d]=b.id;delete this.shapes[a]},replaceWithShapes:function(a,b){var c=this.shapeseq,d={},e,f,g;for(f=a.length;f--;)d[a[f]]=true;for(f=c.length;f--;){e=c[f];if(d[e]){c.splice(f,1);delete this.shapes[e];g=f}}for(f=b.length;f--;){c.splice(g,0,b[f].id);this.shapes[b[f].id]=b[f]}},insertAfterShape:function(a,b){var c=this.shapeseq,d;for(d=c.length;d--;)if(c[d]===a){c.splice(d+
1,0,b.id);this.shapes[b.id]=b;break}},removeShapeId:function(a){var b=this.shapeseq,c;for(c=b.length;c--;)if(b[c]===a){b.splice(c,1);break}delete this.shapes[a]},getShapeAt:function(a,b,c){this.targetX=b;this.targetY=c;this.render();return this.currentTargetShapeId},render:function(){var a=this.shapeseq,b=this.shapes,c=a.length,d,e;this._getContext().clearRect(0,0,this.pixelWidth,this.pixelHeight);for(e=0;e<c;e++){d=a[e];d=b[d];this["_draw"+d.type].apply(this,d.args)}if(!this.interact){this.shapes=
{};this.shapeseq=[]}}});VShape=createClass({init:function(a,b,c,d){this.target=a;this.id=b;this.type=c;this.args=d},append:function(){this.target.appendShape(this);return this}});
VCanvas_base=createClass({_pxregex:/(\d+)(px)?\s*$/i,init:function(a,b,c){if(a){this.width=a;this.height=b;this.target=c;this.lastShapeId=null;if(c[0])c=c[0];$.data(c,"_jqs_vcanvas",this)}},drawLine:function(a,b,c,d,e,f){return this.drawShape([[a,b],[c,d]],e,f)},drawShape:function(a,b,c,d){return this._genShape("Shape",[a,b,c,d])},drawCircle:function(a,b,c,d,e,f){return this._genShape("Circle",[a,b,c,d,e,f])},drawPieSlice:function(a,b,c,d,e,f,g){return this._genShape("PieSlice",[a,b,c,d,e,f,g])},
drawRect:function(a,b,c,d,e,f){return this._genShape("Rect",[a,b,c,d,e,f])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(a,b){$(b).html(a)},_calculatePixelDims:function(a,b,c){this.pixelHeight=(b=this._pxregex.exec(b))?b[1]:$(c).height();this.pixelWidth=(b=this._pxregex.exec(a))?b[1]:$(c).width()},_genShape:function(a,b){var c=shapeCount++;b.unshift(c);return new VShape(this,c,a,b)},appendShape:function(){alert("appendShape not implemented")},
replaceWithShape:function(){alert("replaceWithShape not implemented")},insertAfterShape:function(){alert("insertAfterShape not implemented")},removeShapeId:function(){alert("removeShapeId not implemented")},getShapeAt:function(){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}});
VCanvas_vml=createClass(VCanvas_base,{init:function(a,b,c){VCanvas_vml._super.init.call(this,a,b,c);if(c[0])c=c[0];$.data(c,"_jqs_vcanvas",this);this.canvas=document.createElement("span");$(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:a,height:b,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,c);this._calculatePixelDims(a,b,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;this.canvas.insertAdjacentHTML("beforeEnd",
'<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>');this.group=$(this.canvas).children()[0];this.rendered=false;this.prerender=""},_drawShape:function(a,b,c,d,e){var f=[],g,i;i=0;for(g=b.length;i<g;i++)f[i]=""+b[i][0]+","+b[i][1];b=f.splice(0,1);g=f[0]===f[f.length-1]?"x ":"";return'<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+
'" id="jqsshape'+a+'" '+(c===undefined?' stroked="false" ':' strokeWeight="'+(e===undefined?1:e)+'px" strokeColor="'+c+'" ')+(d===undefined?' filled="false"':' fillColor="'+d+'" filled="true" ')+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" path="m '+b+" l "+f.join(", ")+" "+g+'e"> </v:shape>'},_drawCircle:function(a,b,c,d,e,f,g){b-=d;c-=d;return'<v:oval id="jqsshape'+a+'" '+(e===undefined?' stroked="false" ':' strokeWeight="'+
g+'px" strokeColor="'+e+'" ')+(f===undefined?' filled="false"':' fillColor="'+f+'" filled="true" ')+' style="position:absolute;top:'+c+"px; left:"+b+"px; width:"+d*2+"px; height:"+d*2+'px"></v:oval>'},_drawPieSlice:function(a,b,c,d,e,f,g,i){var j,h,k,l;if(e===f)return"";if(f-e===2*Math.PI){e=0;f=2*Math.PI}j=b+Math.round(Math.cos(e)*d);h=c+Math.round(Math.sin(e)*d);k=b+Math.round(Math.cos(f)*d);l=c+Math.round(Math.sin(f)*d);if(j===k&&h===l){if(f-e<Math.PI)return"";j=k=b+d;h=l=c}if(j===k&&h===l&&f-
e<Math.PI)return"";return'<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" id="jqsshape'+a+'" '+(g===undefined?' stroked="false" ':' strokeWeight="1px" strokeColor="'+g+'" ')+(i===undefined?' filled="false"':' fillColor="'+i+'" filled="true" ')+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" path="m '+b+","+c+" wa "+[b-d,c-d,b+d,c+d,j,h,k,l].join(", ")+' x e"> </v:shape>'},_drawRect:function(a,
b,c,d,e,f,g){return this._drawShape(a,[[b,c],[b,c+e],[b+d,c+e],[b+d,c],[b,c]],f,g)},reset:function(){this.group.innerHTML=""},appendShape:function(a){var b=this["_draw"+a.type].apply(this,a.args);if(this.rendered)this.group.insertAdjacentHTML("beforeEnd",b);else this.prerender+=b;return this.lastShapeId=a.id},replaceWithShape:function(a,b){var c=$("#jqsshape"+a),d=this["_draw"+b.type].apply(this,b.args);c[0].outerHTML=d},replaceWithShapes:function(a,b){var c=$("#jqsshape"+a[0]),d="",e=b.length,f;
for(f=0;f<e;f++)d+=this["_draw"+b[f].type].apply(this,b[f].args);c[0].outerHTML=d;for(f=1;f<a.length;f++)$("#jqsshape"+a[f]).remove()},insertAfterShape:function(a,b){var c=$("#jqsshape"+a),d=this["_draw"+b.type].apply(this,b.args);c[0].insertAdjacentHTML("afterEnd",d)},removeShapeId:function(a){this.group.removeChild($("#jqsshape"+a)[0])},getShapeAt:function(a){return a.id.substr(8)},render:function(){if(!this.rendered){this.group.innerHTML=this.prerender;this.rendered=true}}});
$.fn.sparkline.box=box=createClass($.fn.sparkline._base,{type:"box",init:function(a,b,c,d,e){box._super.init.call(this,a,b,c,d,e);this.values=$.map(b,Number);this.width=c.get("width")==="auto"?"4.0em":d;this.initTarget();if(!this.values.length)this.disabled=1},getRegion:function(){return 1},getCurrentRegionFields:function(){var a=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];this.loutlier!==undefined&&a.push({field:"lo",value:this.loutlier});
this.routlier!==undefined&&a.push({field:"ro",value:this.routlier});this.lwhisker!==undefined&&a.push({field:"lw",value:this.lwhisker});this.rwhisker!==undefined&&a.push({field:"rw",value:this.rwhisker});return a},render:function(){var a=this.target,b=this.values,c=b.length,d=this.options,e=this.canvasWidth,f=this.canvasHeight,g=d.get("chartRangeMin")===undefined?Math.min.apply(Math,b):d.get("chartRangeMin"),i=d.get("chartRangeMax")===undefined?Math.max.apply(Math,b):d.get("chartRangeMax"),j=0,h,
k,l,n,m,o,p,r;if(box._super.render.call(this)){if(d.get("raw"))if(d.get("showOutliers")&&b.length>5){k=b[0];h=b[1];n=b[2];m=b[3];o=b[4];p=b[5];r=b[6]}else{h=b[0];n=b[1];m=b[2];o=b[3];p=b[4]}else{b.sort(function(s,u){return s-u});n=quartile(b,1);m=quartile(b,2);o=quartile(b,3);l=o-n;if(d.get("showOutliers")){h=p=undefined;for(k=0;k<c;k++){if(h===undefined&&b[k]>n-l*d.get("outlierIQR"))h=b[k];if(b[k]<o+l*d.get("outlierIQR"))p=b[k]}k=b[0];r=b[c-1]}else{h=b[0];p=b[c-1]}}this.quartiles=[n,m,o];this.lwhisker=
h;this.rwhisker=p;this.loutlier=k;this.routlier=r;b=e/(i-g+1);if(d.get("showOutliers")){j=Math.ceil(d.get("spotRadius"));e-=2*Math.ceil(d.get("spotRadius"));b=e/(i-g+1);k<h&&a.drawCircle((k-g)*b+j,f/2,d.get("spotRadius"),d.get("outlierLineColor"),d.get("outlierFillColor")).append();r>p&&a.drawCircle((r-g)*b+j,f/2,d.get("spotRadius"),d.get("outlierLineColor"),d.get("outlierFillColor")).append()}a.drawRect(Math.round((n-g)*b+j),Math.round(f*0.1),Math.round((o-n)*b),Math.round(f*0.8),d.get("boxLineColor"),
d.get("boxFillColor")).append();a.drawLine(Math.round((h-g)*b+j),Math.round(f/2),Math.round((n-g)*b+j),Math.round(f/2),d.get("lineColor")).append();a.drawLine(Math.round((h-g)*b+j),Math.round(f/4),Math.round((h-g)*b+j),Math.round(f-f/4),d.get("whiskerColor")).append();a.drawLine(Math.round((p-g)*b+j),Math.round(f/2),Math.round((o-g)*b+j),Math.round(f/2),d.get("lineColor")).append();a.drawLine(Math.round((p-g)*b+j),Math.round(f/4),Math.round((p-g)*b+j),Math.round(f-f/4),d.get("whiskerColor")).append();
a.drawLine(Math.round((m-g)*b+j),Math.round(f*0.1),Math.round((m-g)*b+j),Math.round(f*0.9),d.get("medianColor")).append();if(d.get("target")){e=Math.ceil(d.get("spotRadius"));a.drawLine(Math.round((d.get("target")-g)*b+j),Math.round(f/2-e),Math.round((d.get("target")-g)*b+j),Math.round(f/2+e),d.get("targetColor")).append();a.drawLine(Math.round((d.get("target")-g)*b+j-e),Math.round(f/2),Math.round((d.get("target")-g)*b+j+e),Math.round(f/2),d.get("targetColor")).append()}a.render()}}});
$.fn.sparkline.bar=bar=createClass($.fn.sparkline._base,barHighlightMixin,{type:"bar",init:function(a,b,c,d,e){var f=parseInt(c.get("barWidth"),10),g=parseInt(c.get("barSpacing"),10),i=c.get("chartRangeMin"),j=c.get("chartRangeMax"),h=c.get("chartRangeClip"),k=Infinity,l=-Infinity,n,m,o,p,r,s;bar._super.init.call(this,a,b,c,d,e);a=0;for(d=b.length;a<d;a++){e=b[a];if((n=typeof e==="string"&&e.indexOf(":")>-1)||$.isArray(e)){p=true;if(n)e=b[a]=normalizeValues(e.split(":"));e=remove(e,null);n=Math.min.apply(Math,
e);e=Math.max.apply(Math,e);if(n<k)k=n;if(e>l)l=e}}this.stacked=p;this.regionShapes={};this.barWidth=f;this.barSpacing=g;this.totalBarWidth=f+g;this.width=b.length*f+(b.length-1)*g;this.initTarget();if(h){o=i===undefined?-Infinity:i;m=j===undefined?Infinity:j}i=[];f=p?[]:i;j=[];g=[];a=0;for(d=b.length;a<d;a++)if(p){n=b[a];b[a]=[];j[a]=0;r=f[a]=g[a]=0;for(s=n.length;r<s;r++){e=h?clipval(n[r],o,m):n[r];if(e!==null){if(e>0)j[a]+=e;if(k<0&&l>0)if(e<0)g[a]+=Math.abs(e);else f[a]+=e;else f[a]+=Math.abs(e-
(e<0?l:k));i.push(e)}}}else{e=h?clipval(b[a],o,m):b[a];e=b[a]=normalizeValue(e);e!==null&&i.push(e)}this.max=h=Math.max.apply(Math,i);this.min=b=Math.min.apply(Math,i);this.stackMax=l=p?Math.max.apply(Math,j):h;this.stackMin=p?Math.min.apply(Math,i):b;if(c.get("chartRangeMin")!==undefined&&(c.get("chartRangeClip")||c.get("chartRangeMin")<b))b=c.get("chartRangeMin");if(c.get("chartRangeMax")!==undefined&&(c.get("chartRangeClip")||c.get("chartRangeMax")>h))h=c.get("chartRangeMax");this.zeroAxis=k=c.get("zeroAxis",
true);this.xaxisOffset=o=b<=0&&h>=0&&k?0:k==false?b:b>0?b:h;m=p?Math.max.apply(Math,f)+Math.max.apply(Math,g):h-b;this.canvasHeightEf=k&&b<0?this.canvasHeight-2:this.canvasHeight-1;if(b<o){l=((p&&h>=0?l:h)-o)/m*this.canvasHeight;if(l!==Math.ceil(l)){this.canvasHeightEf-=2;l=Math.ceil(l)}}else l=this.canvasHeight;this.yoffset=l;if($.isArray(c.get("colorMap"))){this.colorMapByIndex=c.get("colorMap");this.colorMapByValue=null}else{this.colorMapByIndex=null;if((this.colorMapByValue=c.get("colorMap"))&&
this.colorMapByValue.get===undefined)this.colorMapByValue=new RangeMap(this.colorMapByValue)}this.range=m},getRegion:function(a,b){var c=Math.floor(b/this.totalBarWidth);return c<0||c>=this.values.length?undefined:c},getCurrentRegionFields:function(){var a=this.currentRegion,b=ensureArray(this.values[a]),c=[],d,e;for(e=b.length;e--;){d=b[e];c.push({isNull:d===null,value:d,color:this.calcColor(e,d,a),offset:a})}return c},calcColor:function(a,b,c){var d=this.colorMapByIndex,e=this.colorMapByValue,f=
this.options,g,i;g=this.stacked?f.get("stackedBarColor"):b<0?f.get("negBarColor"):f.get("barColor");if(b===0&&f.get("zeroColor")!==undefined)g=f.get("zeroColor");if(e&&(i=e.get(b)))g=i;else if(d&&d.length>c)g=d[c];return $.isArray(g)?g[a%g.length]:g},renderRegion:function(a,b){var c=this.values[a],d=this.options,e=this.xaxisOffset,f=[],g=this.range,i=this.stacked,j=this.target,h=a*this.totalBarWidth,k=this.canvasHeightEf,l=this.yoffset,n,m,o,p,r,s,u,v;c=$.isArray(c)?c:[c];s=c.length;n=all(null,c);
v=all(e,c,true);if(n)if(d.get("nullColor")){o=b?d.get("nullColor"):this.calcHighlightColor(d.get("nullColor"),d);return j.drawRect(h,l>0?l-1:l,this.barWidth-1,0,o,o)}else return;p=l;for(r=0;r<s;r++){o=c[r];if(i&&o===e){if(!v||u)continue;u=true}m=g>0?Math.floor(k*(Math.abs(o-e)/g))+1:1;if(o<e||o===e&&l===0){n=p;p+=m}else{n=l-m;l-=m}o=this.calcColor(r,o,a);if(b)o=this.calcHighlightColor(o,d);f.push(j.drawRect(h,n,this.barWidth-1,m-1,o,o))}if(f.length===1)return f[0];return f}});
$.fn.sparkline.bullet=bullet=createClass($.fn.sparkline._base,{type:"bullet",init:function(a,b,c,d,e){var f;bullet._super.init.call(this,a,b,c,d,e);this.values=b=normalizeValues(b);a=b.slice();a[0]=a[0]===null?a[2]:a[0];a[1]=b[1]===null?a[2]:a[1];a=Math.min.apply(Math,b);f=Math.max.apply(Math,b);this.min=a=c.get("base")===undefined?a<0?a:0:c.get("base");this.max=f;this.range=f-a;this.shapes={};this.valueShapes={};this.regiondata={};this.width=d=c.get("width")==="auto"?"4.0em":d;this.target=this.$el.simpledraw(d,
e,c.get("composite"));if(!b.length)this.disabled=true;this.initTarget()},getRegion:function(a,b,c){a=this.target.getShapeAt(a,b,c);return a!==undefined&&this.shapes[a]!==undefined?this.shapes[a]:undefined},getCurrentRegionFields:function(){var a=this.currentRegion;return{fieldkey:a.substr(0,1),value:this.values[a.substr(1)],region:a}},changeHighlight:function(a){var b=this.currentRegion,c=this.valueShapes[b],d;delete this.shapes[c];switch(b.substr(0,1)){case "r":d=this.renderRange(b.substr(1),a);
break;case "p":d=this.renderPerformance(a);break;case "t":d=this.renderTarget(a)}this.valueShapes[b]=d.id;this.shapes[d.id]=b;this.target.replaceWithShape(c,d)},renderRange:function(a,b){var c=Math.round(this.canvasWidth*((this.values[a]-this.min)/this.range)),d=this.options.get("rangeColors")[a-2];if(b)d=this.calcHighlightColor(d,this.options);return this.target.drawRect(0,0,c-1,this.canvasHeight-1,d,d)},renderPerformance:function(a){var b=Math.round(this.canvasWidth*((this.values[1]-this.min)/this.range)),
c=this.options.get("performanceColor");if(a)c=this.calcHighlightColor(c,this.options);return this.target.drawRect(0,Math.round(this.canvasHeight*0.3),b-1,Math.round(this.canvasHeight*0.4)-1,c,c)},renderTarget:function(a){var b=Math.round(this.canvasWidth*((this.values[0]-this.min)/this.range)-this.options.get("targetWidth")/2),c=Math.round(this.canvasHeight*0.1),d=this.canvasHeight-c*2,e=this.options.get("targetColor");if(a)e=this.calcHighlightColor(e,this.options);return this.target.drawRect(b,c,
this.options.get("targetWidth")-1,d-1,e,e)},render:function(){var a=this.values.length,b=this.target,c,d;if(bullet._super.render.call(this)){for(c=2;c<a;c++){d=this.renderRange(c).append();this.shapes[d.id]="r"+c;this.valueShapes["r"+c]=d.id}if(this.values[1]!==null){d=this.renderPerformance().append();this.shapes[d.id]="p1";this.valueShapes.p1=d.id}if(this.values[0]!==null){d=this.renderTarget().append();this.shapes[d.id]="t0";this.valueShapes.t0=d.id}b.render()}}});
$.fn.sparkline.discrete=discrete=createClass($.fn.sparkline._base,barHighlightMixin,{type:"discrete",init:function(a,b,c,d,e){discrete._super.init.call(this,a,b,c,d,e);this.regionShapes={};this.values=b=$.map(b,Number);this.min=Math.min.apply(Math,b);this.max=Math.max.apply(Math,b);this.range=this.max-this.min;this.width=d=c.get("width")==="auto"?b.length*2:this.width;this.interval=Math.floor(d/b.length);this.itemWidth=d/b.length;if(c.get("chartRangeMin")!==undefined&&(c.get("chartRangeClip")||c.get("chartRangeMin")<
this.min))this.min=c.get("chartRangeMin");if(c.get("chartRangeMax")!==undefined&&(c.get("chartRangeClip")||c.get("chartRangeMax")>this.max))this.max=c.get("chartRangeMax");this.initTarget();if(this.target)this.lineHeight=c.get("lineHeight")==="auto"?Math.round(this.canvasHeight*0.3):c.get("lineHeight")},getRegion:function(a,b){return Math.floor(b/this.itemWidth)},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:this.values[a]===undefined,value:this.values[a],offset:a}},renderRegion:function(a,
b){var c=this.options,d=this.min,e=this.range,f=this.interval,g=this.target,i=this.lineHeight,j=this.canvasHeight-i,h;h=clipval(this.values[a],d,this.max);f*=a;d=Math.round(j-j*((h-d)/e));h=c.get("thresholdColor")&&h<c.get("thresholdValue")?c.get("thresholdColor"):c.get("lineColor");if(b)h=this.calcHighlightColor(h,c);return g.drawLine(f,d,f,d+i,h)}});initStyles=function(){addCSS(defaultStyles)};$(initStyles);pending=[];
$.fn.sparkline=function(a,b){return this.each(function(){var c=new $.fn.sparkline.options(this,b),d=$(this),e,f;e=function(){var g,i,j,h;if(a==="html"||a===undefined){g=this.getAttribute(c.get("tagValuesAttribute"));if(g===undefined||g===null)g=d.html();g=g.replace(/(^\s*<\!--)|(--\>\s*$)|\s+/g,"").split(",")}else g=a;i=c.get("width")==="auto"?g.length*c.get("defaultPixelsPerValue"):c.get("width");if(c.get("height")==="auto"){if(!c.get("composite")||!$.data(this,"_jqs_vcanvas")){h=document.createElement("span");
h.innerHTML="a";d.html(h);j=$(h).innerHeight()||$(h).height();$(h).remove()}}else j=c.get("height");if(c.get("disableInteraction"))h=false;else if(h=$.data(this,"_jqs_mhandler"))c.get("composite")||h.reset();else{h=new MouseHandler(this,c);$.data(this,"_jqs_mhandler",h)}if(c.get("composite")&&!$.data(this,"_jqs_vcanvas")){if(!$.data(this,"_jqs_errnotify")){alert("Attempted to attach a composite sparkline to an element with no existing sparkline");$.data(this,"_jqs_errnotify",true)}}else{j=new ($.fn.sparkline[c.get("type")])(this,
g,c,i,j);j.render();h&&h.registerSparkline(j)}};if($(this).html()&&!c.get("disableHiddenCheck")&&$(this).is(":hidden")||!$(this).parents("body").length){if(!c.get("composite")&&$.data(this,"_jqs_pending"))for(f=pending.length;f;f--)pending[f-1][0]==this&&pending.splice(f-1,1);pending.push([this,e]);$.data(this,"_jqs_pending",true)}else e.call(this)})};$.fn.sparkline.defaults=getDefaults();
$.sparkline_display_visible=function(){var a,b,c,d=[];b=0;for(c=pending.length;b<c;b++){a=pending[b][0];if($(a).is(":visible")&&!$(a).parents().is(":hidden")){pending[b][1].call(a);$.data(pending[b][0],"_jqs_pending",false);d.push(b)}else if(!$(a).closest("html").length&&!$.data(a,"_jqs_pending")){$.data(pending[b][0],"_jqs_pending",false);d.push(b)}}for(b=d.length;b;b--)pending.splice(d[b-1],1)};
$.fn.sparkline.options=createClass({init:function(a,b){var c,d,e;this.userOptions=b=b||{};this.tag=a;this.tagValCache={};c=$.fn.sparkline.defaults;d=c.common;this.tagOptionsPrefix=b.enableTagOptions&&(b.tagOptionsPrefix||d.tagOptionsPrefix);e=this.getTagSetting("type");this.mergedOptions=$.extend({},d,e===UNSET_OPTION?c[b.type||d.type]:c[e],b)},getTagSetting:function(a){var b=this.tagOptionsPrefix,c,d;if(b===false||b===undefined)return UNSET_OPTION;if(this.tagValCache.hasOwnProperty(a))a=this.tagValCache.key;
else{a=this.tag.getAttribute(b+a);if(a===undefined||a===null)a=UNSET_OPTION;else if(a.substr(0,1)==="["){a=a.substr(1,a.length-2).split(",");for(b=a.length;b--;)a[b]=normalizeValue(a[b].replace(/(^\s*)|(\s*$)/g,""))}else if(a.substr(0,1)==="{"){c=a.substr(1,a.length-2).split(",");a={};for(b=c.length;b--;){d=c[b].split(":",2);a[d[0].replace(/(^\s*)|(\s*$)/g,"")]=normalizeValue(d[1].replace(/(^\s*)|(\s*$)/g,""))}}else a=normalizeValue(a);this.tagValCache.key=a}return a},get:function(a,b){var c=this.getTagSetting(a),
d;if(c!==UNSET_OPTION)return c;return(d=this.mergedOptions[a])===undefined?b:d}});
$.fn.sparkline._base=createClass({disabled:false,init:function(a,b,c,d,e){this.el=a;this.$el=$(a);this.values=b;this.options=c;this.width=d;this.height=e;this.currentRegion=undefined},initTarget:function(){var a=!this.options.get("disableInteraction");if(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),a)){this.canvasWidth=this.target.pixelWidth;this.canvasHeight=this.target.pixelHeight}else this.disabled=true},render:function(){if(this.disabled){this.el.innerHTML=
"";return false}return true},getRegion:function(){},setRegionHighlight:function(a,b,c){var d=this.currentRegion,e=!this.options.get("disableHighlight");if(b>this.canvasWidth||c>this.canvasHeight||b<0||c<0)return null;a=this.getRegion(a,b,c);if(d!==a){d!==undefined&&e&&this.removeHighlight();this.currentRegion=a;a!==undefined&&e&&this.renderHighlight();return true}return false},clearRegionHighlight:function(){if(this.currentRegion!==undefined){this.removeHighlight();this.currentRegion=undefined;return true}return false},
renderHighlight:function(){this.changeHighlight(true)},removeHighlight:function(){this.changeHighlight(false)},changeHighlight:function(){},getCurrentRegionTooltip:function(){var a=this.options,b="",c=[],d,e,f,g,i,j,h,k,l;if(this.currentRegion===undefined)return"";d=this.getCurrentRegionFields();if(e=a.get("tooltipFormatter"))return e(this,a,d);if(a.get("tooltipChartTitle"))b+='<div class="jqs jqstitle">'+a.get("tooltipChartTitle")+"</div>\n";e=this.options.get("tooltipFormat");if(!e)return"";$.isArray(e)||
(e=[e]);$.isArray(d)||(d=[d]);f=this.options.get("tooltipFormatFieldlist");g=this.options.get("tooltipFormatFieldlistKey");if(f&&g){i=[];for(j=d.length;j--;){h=d[j][g];if((h=$.inArray(h,f))!=-1)i[h]=d[j]}d=i}f=e.length;l=d.length;for(j=0;j<f;j++){k=e[j];if(typeof k==="string")k=new SPFormat(k);g=k.fclass||"jqsfield";for(h=0;h<l;h++)if(!d[h].isNull||!a.get("tooltipSkipNull")){$.extend(d[h],{prefix:a.get("tooltipPrefix"),suffix:a.get("tooltipSuffix")});i=k.render(d[h],a.get("tooltipValueLookups"),a);
c.push('<div class="'+g+'">'+i+"</div>")}}if(c.length)return b+c.join("\n");return""},getCurrentRegionFields:function(){},calcHighlightColor:function(a,b){var c=b.get("highlightColor"),d=b.get("highlightLighten"),e,f,g;if(c)return c;if(d)if(c=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(a)){f=[];e=a.length===4?16:1;for(g=0;g<3;g++)f[g]=clipval(Math.round(parseInt(c[g+1],16)*e*d),0,255);return"rgb("+f.join(",")+")"}return a}});
barHighlightMixin={changeHighlight:function(a){var b=this.currentRegion,c=this.target,d=this.regionShapes[b];if(d){a=this.renderRegion(b,a);if($.isArray(a)||$.isArray(d)){c.replaceWithShapes(d,a);this.regionShapes[b]=$.map(a,function(e){return e.id})}else{c.replaceWithShape(d,a);this.regionShapes[b]=a.id}}},render:function(){var a=this.values,b=this.target,c=this.regionShapes,d,e,f;if(this.cls._super.render.call(this)){for(e=a.length;e--;)if(a=this.renderRegion(e))if($.isArray(a)){d=[];for(f=a.length;f--;){a[f].append();
d.push(a[f].id)}c[e]=d}else{a.append();c[e]=a.id}else c[e]=null;b.render()}}};
$.fn.sparkline.line=line=createClass($.fn.sparkline._base,{type:"line",init:function(a,b,c,d,e){line._super.init.call(this,a,b,c,d,e);this.vertices=[];this.regionMap=[];this.xvalues=[];this.yvalues=[];this.yminmax=[];this.lastShapeId=this.hightlightSpotId=null;this.initTarget()},getRegion:function(a,b){var c,d=this.regionMap;for(c=d.length;c--;)if(d[c]!==null&&b>=d[c][0]&&b<=d[c][1])return d[c][2]},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:this.yvalues[a]===null,x:this.xvalues[a],
y:this.yvalues[a],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:a}},renderHighlight:function(){var a=this.target,b=this.vertices[this.currentRegion],c=this.options,d=c.get("spotRadius"),e=c.get("highlightSpotColor");c=c.get("highlightLineColor");if(b){if(d&&e){d=a.drawCircle(b[0],b[1],d,undefined,e);this.highlightSpotId=d.id;a.insertAfterShape(this.lastShapeId,d)}if(c){b=a.drawLine(b[0],this.canvasTop,b[0],this.canvasTop+this.canvasHeight,c);this.highlightLineId=
b.id;a.insertAfterShape(this.lastShapeId,b)}}},removeHighlight:function(){var a=this.target;if(this.highlightSpotId){a.removeShapeId(this.highlightSpotId);this.highlightSpotId=null}if(this.highlightLineId){a.removeShapeId(this.highlightLineId);this.highlightLineId=null}},scanValues:function(){var a=this.values,b=a.length,c=this.xvalues,d=this.yvalues,e=this.yminmax,f,g,i,j,h;for(f=0;f<b;f++){g=a[f];i=typeof a[f]==="string";j=typeof a[f]==="object"&&a[f]instanceof Array;h=i&&a[f].split(":");if(i&&
h.length===2){c.push(Number(h[0]));d.push(Number(h[1]));e.push(Number(h[1]))}else if(j){c.push(g[0]);d.push(g[1]);e.push(g[1])}else{c.push(f);if(a[f]===null||a[f]==="null")d.push(null);else{d.push(Number(g));e.push(Number(g))}}}if(this.options.get("xvalues"))c=this.options.get("xvalues");this.maxy=this.maxyorg=Math.max.apply(Math,e);this.miny=this.minyorg=Math.min.apply(Math,e);this.maxx=Math.max.apply(Math,c);this.minx=Math.min.apply(Math,c);this.xvalues=c;this.yvalues=d;this.yminmax=e},processRangeOptions:function(){var a=
this.options,b=a.get("normalRangeMin"),c=a.get("normalRangeMax");if(b!==undefined){if(b<this.miny)this.miny=b;if(c>this.maxy)this.maxy=c}if(a.get("chartRangeMin")!==undefined&&(a.get("chartRangeClip")||a.get("chartRangeMin")<this.miny))this.miny=a.get("chartRangeMin");if(a.get("chartRangeMax")!==undefined&&(a.get("chartRangeClip")||a.get("chartRangeMax")>this.maxy))this.maxy=a.get("chartRangeMax");if(a.get("chartRangeMinX")!==undefined&&(a.get("chartRangeClipX")||a.get("chartRangeMinX")<this.minx))this.minx=
a.get("chartRangeMinX");if(a.get("chartRangeMaxX")!==undefined&&(a.get("chartRangeClipX")||a.get("chartRangeMaxX")>this.maxx))this.maxx=a.get("chartRangeMaxX")},drawNormalRange:function(a,b,c,d,e){var f=this.options.get("normalRangeMin"),g=this.options.get("normalRangeMax");this.target.drawRect(a,b+Math.round(c-c*((g-this.miny)/e)),d,Math.round(c*(g-f)/e),undefined,this.options.get("normalRangeColor")).append()},render:function(){var a=this.options,b=this.target,c=this.canvasWidth,d=this.canvasHeight,
e=this.vertices,f=a.get("spotRadius"),g=this.regionMap,i,j,h,k,l,n,m,o,p,r,s,u,v,t,q;if(line._super.render.call(this)){this.scanValues();this.processRangeOptions();v=this.xvalues;t=this.yvalues;if(!(!this.yminmax.length||this.yvalues.length<2)){k=l=0;i=this.maxx-this.minx===0?1:this.maxx-this.minx;j=this.maxy-this.miny===0?1:this.maxy-this.miny;h=this.yvalues.length-1;if(f&&(c<f*4||d<f*4))f=0;if(f){if((u=a.get("highlightSpotColor")&&!a.get("disableInteraction"))||a.get("minSpotColor")||a.get("spotColor")&&
t[h]===this.miny)d-=Math.ceil(f);if(u||a.get("maxSpotColor")||a.get("spotColor")&&t[h]===this.maxy){d-=Math.ceil(f);k+=Math.ceil(f)}if(u||(a.get("minSpotColor")||a.get("maxSpotColor"))&&(t[0]===this.miny||t[0]===this.maxy)){l+=Math.ceil(f);c-=Math.ceil(f)}if(u||a.get("spotColor")||a.get("minSpotColor")||a.get("maxSpotColor")&&(t[h]===this.miny||t[h]===this.maxy))c-=Math.ceil(f)}d--;a.get("normalRangeMin")!==undefined&&!a.get("drawNormalOnTop")&&this.drawNormalRange(l,k,d,c,j);m=[];o=[m];s=null;u=
t.length;for(q=0;q<u;q++){p=v[q];r=v[q+1];n=t[q];p=l+Math.round((p-this.minx)*(c/i));r=q<u-1?l+Math.round((r-this.minx)*(c/i)):c;r=p+(r-p)/2;g[q]=[s||0,r,q];s=r;if(n===null){if(q){if(t[q-1]!==null){m=[];o.push(m)}e.push(null)}}else{if(n<this.miny)n=this.miny;if(n>this.maxy)n=this.maxy;m.length||m.push([p,k+d]);n=[p,k+Math.round(d-d*((n-this.miny)/j))];m.push(n);e.push(n)}}e=[];g=[];s=o.length;for(q=0;q<s;q++){m=o[q];if(m.length){if(a.get("fillColor")){m.push([m[m.length-1][0],k+d]);g.push(m.slice(0));
m.pop()}if(m.length>2)m[0]=[m[0][0],m[1][1]];e.push(m)}}s=g.length;for(q=0;q<s;q++)b.drawShape(g[q],a.get("fillColor"),a.get("fillColor")).append();a.get("normalRangeMin")!==undefined&&a.get("drawNormalOnTop")&&this.drawNormalRange(l,k,d,c,j);s=e.length;for(q=0;q<s;q++)b.drawShape(e[q],a.get("lineColor"),undefined,a.get("lineWidth")).append();if(f&&a.get("valueSpots")){m=a.get("valueSpots");if(m.get===undefined)m=new RangeMap(m);for(q=0;q<u;q++)(o=m.get(t[q]))&&b.drawCircle(l+Math.round((v[q]-this.minx)*
(c/i)),k+Math.round(d-d*((t[q]-this.miny)/j)),f,undefined,o).append()}f&&a.get("spotColor")&&t[h]!==null&&b.drawCircle(l+Math.round((v[v.length-1]-this.minx)*(c/i)),k+Math.round(d-d*((t[h]-this.miny)/j)),f,undefined,a.get("spotColor")).append();if(this.maxy!==this.minyorg){if(f&&a.get("minSpotColor")){p=v[$.inArray(this.minyorg,t)];b.drawCircle(l+Math.round((p-this.minx)*(c/i)),k+Math.round(d-d*((this.minyorg-this.miny)/j)),f,undefined,a.get("minSpotColor")).append()}if(f&&a.get("maxSpotColor")){p=
v[$.inArray(this.maxyorg,t)];b.drawCircle(l+Math.round((p-this.minx)*(c/i)),k+Math.round(d-d*((this.maxyorg-this.miny)/j)),f,undefined,a.get("maxSpotColor")).append()}}this.lastShapeId=b.getLastShapeId();this.canvasTop=k;b.render()}}}});
$.fn.sparkline.pie=pie=createClass($.fn.sparkline._base,{type:"pie",init:function(a,b,c,d,e){var f=0;pie._super.init.call(this,a,b,c,d,e);this.shapes={};this.valueShapes={};this.values=b=$.map(b,Number);if(c.get("width")==="auto")this.width=this.height;if(b.length>0)for(a=b.length;a--;)f+=b[a];this.total=f;this.initTarget();this.radius=Math.floor(Math.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(a,b,c){a=this.target.getShapeAt(a,b,c);return a!==undefined&&this.shapes[a]!==undefined?
this.shapes[a]:undefined},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:this.values[a]===undefined,value:this.values[a],percent:this.values[a]/this.total*100,color:this.options.get("sliceColors")[a%this.options.get("sliceColors").length],offset:a}},changeHighlight:function(a){var b=this.currentRegion;a=this.renderSlice(b,a);var c=this.valueShapes[b];delete this.shapes[c];this.target.replaceWithShape(c,a);this.valueShapes[b]=a.id;this.shapes[a.id]=b},renderSlice:function(a,
b){var c=this.target,d=this.options,e=this.radius,f=d.get("borderWidth"),g=d.get("offset"),i=2*Math.PI,j=this.values,h=this.total,k=g?2*Math.PI*(g/360):0,l,n,m;m=j.length;for(n=0;n<m;n++){l=g=k;if(h>0)l=k+i*(j[n]/h);if(a===n){i=d.get("sliceColors")[n%d.get("sliceColors").length];if(b)i=this.calcHighlightColor(i,d);return c.drawPieSlice(e,e,e-f,g,l,undefined,i)}k=l}},render:function(){var a=this.target,b=this.values,c=this.options,d=this.radius,e=c.get("borderWidth");if(pie._super.render.call(this)){e&&
a.drawCircle(d,d,Math.floor(d-e/2),c.get("borderColor"),undefined,e).append();for(d=b.length;d--;)if(b[d]){c=this.renderSlice(d).append();this.valueShapes[d]=c.id;this.shapes[c.id]=d}a.render()}}});
$.fn.sparkline.tristate=tristate=createClass($.fn.sparkline._base,barHighlightMixin,{type:"tristate",init:function(a,b,c,d,e){var f=parseInt(c.get("barWidth"),10),g=parseInt(c.get("barSpacing"),10);tristate._super.init.call(this,a,b,c,d,e);this.regionShapes={};this.barWidth=f;this.barSpacing=g;this.totalBarWidth=f+g;this.values=$.map(b,Number);this.width=b.length*f+(b.length-1)*g;if($.isArray(c.get("colorMap"))){this.colorMapByIndex=c.get("colorMap");this.colorMapByValue=null}else{this.colorMapByIndex=
null;if((this.colorMapByValue=c.get("colorMap"))&&this.colorMapByValue.get===undefined)this.colorMapByValue=new RangeMap(this.colorMapByValue)}this.initTarget()},getRegion:function(a,b){return Math.floor(b/this.totalBarWidth)},getCurrentRegionFields:function(){var a=this.currentRegion;return{isNull:this.values[a]===undefined,value:this.values[a],color:this.calcColor(this.values[a],a),offset:a}},calcColor:function(a,b){var c=this.values,d=this.options,e=this.colorMapByIndex,f=this.colorMapByValue,
g;return f&&(g=f.get(a))?g:e&&e.length>b?e[b]:c[b]<0?d.get("negBarColor"):c[b]>0?d.get("posBarColor"):d.get("zeroBarColor")},renderRegion:function(a,b){var c=this.values,d=this.options,e=this.target,f,g,i;f=Math.round(e.pixelHeight/2);g=a*this.totalBarWidth;if(c[a]<0){i=f;f-=1}else if(c[a]>0){i=0;f-=1}else{i=f-1;f=2}c=this.calcColor(c[a],a);if(c!==null){if(b)c=this.calcHighlightColor(c,d);return e.drawRect(g,i,this.barWidth-1,f-1,c,c)}}});
getDefaults=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:false,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:false,enableHighlight:true,highlightLighten:1.4,tooltipSkipNull:true,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:false,numberFormatter:false,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:false,disableInteraction:false},line:{spotColor:"#f80",
highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:undefined,normalRangeMax:undefined,normalRangeColor:"#ccc",drawNormalOnTop:false,chartRangeMin:undefined,chartRangeMax:undefined,chartRangeMinX:undefined,chartRangeMaxX:undefined,tooltipFormat:new SPFormat('<span style="color: {{color}}">●</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900",
"#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:undefined,nullColor:undefined,zeroAxis:true,barWidth:4,barSpacing:1,chartRangeMax:undefined,chartRangeMin:undefined,chartRangeClip:false,colorMap:undefined,tooltipFormat:new SPFormat('<span style="color: {{color}}">●</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new SPFormat('<span style="color: {{color}}">●</span> {{value:map}}'),
tooltipValueLookups:{map:{"-1":"Loss","0":"Draw","1":"Win"}}},discrete:{lineHeight:"auto",thresholdColor:undefined,thresholdValue:0,chartRangeMax:undefined,chartRangeMin:undefined,chartRangeClip:false,tooltipFormat:new SPFormat("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:undefined,tooltipFormat:new SPFormat("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",
t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new SPFormat('<span style="color: {{color}}">●</span> {{value}} ({{percent.1}}%)')},box:{raw:false,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:true,outlierIQR:1.5,spotRadius:1.5,target:undefined,targetColor:"#4a2",chartRangeMax:undefined,
chartRangeMin:undefined,tooltipFormat:new SPFormat("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}};defaultStyles='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;box-sizing: content-box;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}';
MouseHandler=createClass({init:function(a,b){this.$el=$(a);this.options=b;this.currentPageY=this.currentPageX=0;this.el=a;this.splist=[];this.tooltip=null;this.over=false;this.displayTooltips=!b.get("disableTooltips");this.highlightEnabled=!b.get("disableHighlight")},registerSparkline:function(a){this.splist.push(a);this.over&&this.updateDisplay()},registerCanvas:function(a){var b=$(a.canvas);this.canvas=a;this.$canvas=b;b.mouseenter($.proxy(this.mouseenter,this));b.mouseleave($.proxy(this.mouseleave,
this));b.click($.proxy(this.mouseclick,this))},reset:function(a){this.splist=[];if(this.tooltip&&a){this.tooltip.remove();this.tooltip=undefined}},mouseclick:function(a){var b=$.Event("sparklineClick");b.originalEvent=a;b.sparklines=this.splist;this.$el.trigger(b)},mouseenter:function(a){$(document.body).unbind("mousemove.jqs");$(document.body).bind("mousemove.jqs",$.proxy(this.mousemove,this));this.over=true;this.currentPageX=a.pageX;this.currentPageY=a.pageY;this.currentEl=a.target;if(!this.tooltip&&
this.displayTooltips){this.tooltip=new Tooltip(this.options);this.tooltip.updatePosition(a.pageX,a.pageY)}this.updateDisplay()},mouseleave:function(){$(document.body).unbind("mousemove.jqs");var a=this.splist,b=a.length,c=false,d,e;this.over=false;this.currentEl=null;if(this.tooltip){this.tooltip.remove();this.tooltip=null}for(e=0;e<b;e++){d=a[e];if(d.clearRegionHighlight())c=true}c&&this.canvas.render()},mousemove:function(a){this.currentPageX=a.pageX;this.currentPageY=a.pageY;this.currentEl=a.target;
this.tooltip&&this.tooltip.updatePosition(a.pageX,a.pageY);this.updateDisplay()},updateDisplay:function(){var a=this.splist,b=a.length,c=false,d=this.$canvas.offset(),e=this.currentPageX-d.left,f=this.currentPageY-d.top,g,i;if(this.over){for(g=0;g<b;g++){d=a[g];if(i=d.setRegionHighlight(this.currentEl,e,f))c=true}if(c){c=$.Event("sparklineRegionChange");c.sparklines=this.splist;this.$el.trigger(c);if(this.tooltip){c="";for(g=0;g<b;g++){d=a[g];c+=d.getCurrentRegionTooltip()}this.tooltip.setContent(c)}this.disableHighlight||
this.canvas.render()}i===null&&this.mouseleave()}}});
Tooltip=createClass({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(a){var b=a.get("tooltipClassname","jqstooltip"),c=this.sizeStyle;this.container=a.get("tooltipContainer")||document.body;this.tooltipOffsetX=a.get("tooltipOffsetX",10);this.tooltipOffsetY=a.get("tooltipOffsetY",12);$("#jqssizetip").remove();$("#jqstooltip").remove();this.sizetip=$("<div></b>",{id:"jqssizetip",style:c,"class":b});this.tooltip=$("<div></div>",
{id:"jqstooltip","class":b}).appendTo(this.container);a=this.tooltip.offset();this.offsetLeft=a.left;this.offsetTop=a.top;this.hidden=true;$(window).unbind("resize.jqs scroll.jqs");$(window).bind("resize.jqs scroll.jqs",$.proxy(this.updateWindowDims,this));this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=$(window).scrollTop();this.scrollLeft=$(window).scrollLeft();this.scrollRight=this.scrollLeft+$(window).width();this.updatePosition()},getSize:function(a){this.sizetip.html(a).appendTo(this.container);
this.width=this.sizetip.width()+1;this.height=this.sizetip.height();this.sizetip.remove()},setContent:function(a){if(a){this.getSize(a);this.tooltip.html(a).css({width:this.width,height:this.height,visibility:"visible"});if(this.hidden){this.hidden=false;this.updatePosition()}}else{this.tooltip.css("visibility","hidden");this.hidden=true}},updatePosition:function(a,b){if(a===undefined){if(this.mousex===undefined)return;a=this.mousex-this.offsetLeft;b=this.mousey-this.offsetTop}else{this.mousex=a-=
this.offsetLeft;this.mousey=b-=this.offsetTop}if(!(!this.height||!this.width||this.hidden)){b-=this.height+this.tooltipOffsetY;a+=this.tooltipOffsetX;if(b<this.scrollTop)b=this.scrollTop;if(a<this.scrollLeft)a=this.scrollLeft;else if(a+this.width>this.scrollRight)a=this.scrollRight-this.width;this.tooltip.css({left:a,top:b})}},remove:function(){this.tooltip.remove();this.sizetip.remove();this.sizetip=this.tooltip=undefined;$(window).unbind("resize.jqs scroll.jqs")}});
$.RangeMapClass=RangeMap=createClass({init:function(a){var b,c,d=[];for(b in a)if(a.hasOwnProperty(b)&&typeof b==="string"&&b.indexOf(":")>-1){c=b.split(":");c[0]=c[0].length===0?-Infinity:parseFloat(c[0]);c[1]=c[1].length===0?Infinity:parseFloat(c[1]);c[2]=a[b];d.push(c)}this.map=a;this.rangelist=d||false},get:function(a){var b=this.rangelist,c,d;if((c=this.map[a])!==undefined)return c;if(b)for(c=b.length;c--;){d=b[c];if(d[0]<=a&&d[1]>=a)return d[2]}}});$.range_map=function(a){return new RangeMap(a)};
$.fn.simpledraw=function(a,b,c,d){var e;if(c&&(e=this.data("_jqs_vcanvas")))return e;if($.fn.sparkline.canvas===false)return false;else if($.fn.sparkline.canvas===undefined){e=document.createElement("canvas");if(e.getContext&&e.getContext("2d"))$.fn.sparkline.canvas=function(f,g,i,j){return new VCanvas_canvas(f,g,i,j)};else if(document.namespaces&&!document.namespaces.v){document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");$.fn.sparkline.canvas=function(f,g,i){return new VCanvas_vml(f,
g,i)}}else return $.fn.sparkline.canvas=false}if(a===undefined)a=$(this).innerWidth();if(b===undefined)b=$(this).innerHeight();e=$.fn.sparkline.canvas(a,b,this,d);(a=$(this).data("_jqs_mhandler"))&&a.registerCanvas(e);return e};$.fn.cleardraw=function(){var a=this.data("_jqs_vcanvas");a&&a.reset()};
